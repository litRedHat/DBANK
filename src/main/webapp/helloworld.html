<html ng-app='dbank'>
	<body>
		<div ng-controller="CartController">
			<div ng-repeat="item in items">
				<span>{{item.title}}</span>
				<input ng-module="item.quantity">
				<span>{{item.price | currency}}</span>
				<span>{{item.price * item.quantity | currency}}</span>
			</div>
			<div>Total:{{totalCart() | currency}}</div>
			<div>Discount:{{bill.discount | currency}}</div>
			<div>subtotal:{{subtotal() | currency}}</div>
		</div>
    	<!-- <p ng-bind="name"></p> -->
    <script src="resource/js/angular.js"></script>
    <script>
    	var dbank = angular.module('dbank',[]);
    	/* dbank.controller('HextController',
    		function HextController($scope){
	    		$scope.name = 'wugang';
	    	}
    	); */
    	dbank.controller('CartController',
        		function CartController($scope){
    	    		$scope.bill = {};
    	    		$scope.items = [
    	    			{title:'Œ‰∏’',quantity:8,price:3.95},
    	    			{title:'Õı∑…',quantity:17,price:12.95},
    	    			{title:'¿Ó¬∑',quantity:5,price:6.95}
					];
    	    		
    	    		$scope.totalCart = function(){
    	    			var total = 0;
    	    			for(var i = 0,len = $scope.items.length; i < len; i++){
    	    				total = total + $scope.items[i].price * $scope.items[i].quantity;
    	    			}
    	    			return total;
    	    		}
    	    		
    	    		$scope.subtotal = function(){
    	    			return $scope.totalCart() - $scope.bill.discount;
    	    		};
    	    		
    	    		function calculateDiscount(newValue, oldValue, scope){
    	    			$scope.bill.discount = newValue > 100 ? 20 : 0;
    	    		}
    	    		
    	    		$scope.$watch($scope.totalCart, calculateDiscount);
    	    		
    	    	}
        	);
    </script>
    <body>
</html>